/* ShareCoffee.Search (c) 2013 Thorsten Hans | dotnet-rocks.com | https://github.com/ThorstenHans/ShareCoffee.Search/ | under MIT License | */(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};if(a="undefined"!=typeof global&&null!==global?global:window,null==a.ShareCoffee||null==a.ShareCoffee.CrossDomain)throw new Error("LoadError");if(a.ShareCoffee.CrossDomain.Search={build:{query:{"for":new ShareCoffee.CrossDomainRESTFactory("GET")},postQuery:{"for":new ShareCoffee.CrossDomainRESTFactory("POST")},suggest:{"for":new ShareCoffee.CrossDomainRESTFactory("GET")}}},a="undefined"!=typeof global&&null!==global?global:window,null==a.ShareCoffee)throw new Error("LoadError");if(a.ShareCoffee.QueryProperties=function(){function a(a,c,d){this.querytext=a,this.selectproperties=c,this.querytemplate=d,this.validateUrl=b(this.validateUrl,this),this.getRequestProperties=b(this.getRequestProperties,this),this.getUrl=b(this.getUrl,this),null==this.querytext&&(this.querytext=null),this.isPostQuery=!1,null==this.querytemplate&&(this.querytemplate=null),null==this.enableinterleaving&&(this.enableinterleaving=null),null==this.sourceid&&(this.sourceid=null),null==this.rankingmodelid&&(this.rankingmodelid=null),null==this.startrow&&(this.startrow=null),null==this.rowlimit&&(this.rowlimit=null),null==this.rowsperpage&&(this.rowsperpage=null),null==this.selectproperties&&(this.selectproperties=null),null==this.culture&&(this.culture=null),null==this.refiners&&(this.refiners=null),null==this.refinementfilters&&(this.refinementfilters=null),null==this.hiddenconstraints&&(this.hiddenconstraints=null),null==this.sortlist&&(this.sortlist=null),null==this.enablestemming&&(this.enablestemming=null),null==this.trimduplicates&&(this.trimduplicates=null),null==this.trimduplicatesincludeid&&(this.trimduplicatesincludeid=null),null==this.timeout&&(this.timeout=null),null==this.enablenicknames&&(this.enablenicknames=null),null==this.enablephonetic&&(this.enablephonetic=null),null==this.enablefql&&(this.enablefql=null),null==this.hithighlightedproperties&&(this.hithighlightedproperties=null),null==this.bypassresulttypes&&(this.bypassresulttypes=null),null==this.processbestbets&&(this.processbestbets=null),null==this.clienttype&&(this.clienttype=null),null==this.personalizationdata&&(this.personalizationdata=null),null==this.resultsurl&&(this.resultsurl=null),null==this.querytag&&(this.querytag=null),null==this.enablequeryrules&&(this.enablequeryrules=null),null==this.enablesorting&&(this.enablesorting=null),this.hostWebUrl=null,this.onSuccess=null,this.onError=null}return a.prototype.getUrl=function(){var a,b,c,d,e;e=["querytext","querytemplate","enableinterleaving","sourceid","rankingmodelid","startrow","rowlimit","rowsperpage","selectproperties","culture","refiners","refinementfilters","hiddenconstraints","sortlist","enablestemming","trimduplicates","trimduplicatesincludeid","timeout","enablenicknames","enablephonetic","enablefql","hithighlightedproperties","bypassresulttypes","processbestbets","clienttype","personalizationdata","resultsurl","querytag","enablequeryrules","enablesorting"],a=function(a){return encodeURIComponent(a.replace(/'/g,'"'))},d="Search/query?";for(b in this)c=this[b],e.indexOf(b)>-1&&null!=c&&("string"==typeof c?d=""+d+b+"='"+a(c)+"'&":("number"==typeof c||"boolean"==typeof c)&&(d=""+d+b+"="+c+"&"));return d.substr(0,d.length-1)},a.prototype.getRequestProperties=function(){return this.validateUrl(),new ShareCoffee.REST.RequestProperties(this.getUrl(),null,this.hostWebUrl,null,this.onSuccess,this.onError)},a.prototype.validateUrl=function(){var a;if(a="",a=null!=this.hostWebUrl?""+ShareCoffee.Commons.getApiRootUrl()+"SP.AppContextSite(@target)/"+this.getUrl()+"?@target='"+this.hostWebUrl+"'":""+ShareCoffee.Commons.getApiRootUrl()+this.getUrl(),a.length>ShareCoffee.MaxUrlLength)throw new Error("URL is to long, please use a PostQuery instead of a regular GET Query")},a}(),a.ShareCoffee.PostQueryProperties=function(a){function b(a,c,d){this.querytext=a,this.selectproperties=c,this.querytemplate=d,b.__super__.constructor.call(this,this.querytext,this.selectproperties,this.querytemplate),this.isPostQuery=!0}return d(b,a),b.prototype.getRequestProperties=function(){var a,b,c,d;b={},d=["querytext","querytemplate","enableinterleaving","sourceid","rankingmodelid","startrow","rowlimit","rowsperpage","selectproperties","culture","refiners","refinementfilters","hiddenconstraints","sortlist","enablestemming","trimduplicates","trimduplicatesincludeid","timeout","enablenicknames","enablephonetic","enablefql","hithighlightedproperties","bypassresulttypes","processbestbets","clienttype","personalizationdata","resultsurl","querytag","enablequeryrules","enablesorting"];for(a in this)c=this[a],d.indexOf(a)>-1&&null!=c&&(b[a]=this[a]);return new ShareCoffee.REST.RequestProperties("Search/postQuery",b,this.hostWebUrl,null,this.onSuccess,this.onError)},b}(a.ShareCoffee.QueryProperties),a.ShareCoffee.SuggestProperties=function(){function a(a,c,d,e,f,g,h,i){this.querytext=a,this.inumberofquerysuggestions=c,this.inumberofresultsuggestions=d,this.fprequerysuggestions=e,this.fhithighlighting=f,this.fcapitalizefirstletters=g,this.showpeoplenamesuggestions=h,this.culture=i,this.getUrl=b(this.getUrl,this),this.getRequestProperties=b(this.getRequestProperties,this),null==this.querytext&&(this.querytext=null),null==this.inumberofquerysuggestions&&(this.inumberofquerysuggestions=null),null==this.inumberofresultsuggestions&&(this.inumberofresultsuggestions=null),null==this.fprequerysuggestions&&(this.fprequerysuggestions=null),null==this.fhithighlighting&&(this.fhithighlighting=null),null==this.fcapitalizefirstletters&&(this.fcapitalizefirstletters=null),null==this.showpeoplenamesuggestions&&(this.showpeoplenamesuggestions=null),null==this.culture&&(this.culture=null),this.hostWebUrl=null,this.onSuccess=null,this.onError=null}return a.prototype.getRequestProperties=function(){return new ShareCoffee.REST.RequestProperties(this.getUrl(),null,this.hostWebUrl,null,this.onSuccess,this.onError)},a.prototype.getUrl=function(){var a,b,c,d,e;e=["querytext","inumberofquerysuggestions","inumberofresultsuggestions","fprequerysuggestions","fhithighlighting","fcapitalizefirstletters","showpeoplenamesuggestions","culture"],d="Search/suggest?",a=function(a){return encodeURIComponent(a.replace(/'/g,'"'))};for(b in this)c=this[b],e.indexOf(b)>-1&&null!=c&&("string"==typeof c?d=""+d+b+"='"+a(c)+"'&":("number"==typeof c||"boolean"==typeof c)&&(d=""+d+b+"="+c+"&"));return d.substr(0,d.length-1)},a}(),a="undefined"!=typeof global&&null!==global?global:window,null==a.ShareCoffee||null==a.ShareCoffee.REST)throw new Error("LoadError");a.ShareCoffee.MaxUrlLength=100,a.ShareCoffee.REST.Search={build:{query:{"for":new ShareCoffee.RESTFactory("GET")},postQuery:{"for":new ShareCoffee.RESTFactory("POST")},suggest:{"for":new ShareCoffee.RESTFactory("GET")}}}}).call(this);